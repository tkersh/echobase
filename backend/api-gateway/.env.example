# API Gateway Environment Configuration
#
# For Docker Compose: Use the root .env file (values are passed via docker-compose.yml)
# For standalone development outside Docker:
#   1. Run ./scripts/generate-credentials.sh from the project root
#   2. Override these values for localhost access:
#      SQS_ENDPOINT=http://localhost:4566
#      DB_HOST=localhost
#
# All configuration defaults are maintained in the root .env (tracked in git).
# Secrets are in root .env.secrets (generated, gitignored).

# --- Required ---
PORT=3001                                       # HTTPS listen port
CORS_ORIGIN=https://localhost:3443              # Comma-separated allowed origins
JWT_SECRET=                                     # Set via .env.secrets (generate-credentials.sh)

# --- AWS / SQS ---
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=test                          # Use 'test' for LocalStack
AWS_SECRET_ACCESS_KEY=test
SQS_ENDPOINT=http://localstack:4566
SQS_QUEUE_URL=http://sqs.us-east-1.localhost.localstack.cloud:4566/000000000000/order-processing-queue

# --- Database (credentials from Secrets Manager) ---
SECRETS_MANAGER_ENDPOINT=http://localstack:4566
DB_SECRET_NAME=echobase/database/credentials

# --- Rate Limiting ---
RATE_LIMIT_WINDOW_MS=900000                     # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100000                  # Per IP within window
RATE_LIMIT_ENABLED=true                         # Set 'false' to disable (not recommended)

# --- Security ---
CSRF_PROTECTION=true                            # Set 'false' only for testing
NODE_ENV=development                            # 'production' disables Swagger UI

# --- MCP Recommendations ---
MCP_SERVER_ENDPOINT=http://mcp-server:3002
MCP_API_KEY=                                    # Set via .env.secrets

# --- Observability ---
OTEL_COLLECTOR_ENDPOINT=http://otel-collector:4318
OTEL_SERVICE_NAME=api-gateway
OTEL_TRACE_SAMPLE_RATIO=0.25                    # 0.0 = none, 1.0 = all
OTEL_ENABLED=true                               # Set 'false' to disable all OTEL instrumentation
LOG_LEVEL=INFO                                  # DEBUG, INFO, WARN, ERROR, FATAL
LOG_FORMAT=text                                 # 'json' for structured output
LOG_COLORS=true                                 # Set 'false' for production/CI
